[valentina@valentina PROEKT]$ pg_ctl -D ~/artemRDBM start
сервер запускается
[valentina@valentina PROEKT]$ СООБЩЕНИЕ:  не удалось привязаться к сокету IPv4: Адрес уже используется
ПОДСКАЗКА:  Возможно порт 5432 занят другим процессом postmaster? Если нет, повторите попытку через несколько секунд.
ПРЕДУПРЕЖДЕНИЕ:  не удалось создать принимающий сокет для "localhost"
ВАЖНО:  не удалось создать сокеты TCP/IP
СООБЩЕНИЕ:  система БД выключена

[valentina@valentina PROEKT]$ pg_ctl -D ~/RDBM/artemRDBM stop
СООБЩЕНИЕ:  получен запрос на быстрое выключение
ожидание завершения работы сервера....СООБЩЕНИЕ:  прерывание всех активных транзакций
СООБЩЕНИЕ:  процесс запуска автоочистки завершается
СООБЩЕНИЕ:  выключение
СООБЩЕНИЕ:  система БД выключена
 готово
сервер остановлен
[valentina@valentina PROEKT]$ pg_ctl -D ~/artemRDBM start    
сервер запускается
[valentina@valentina PROEKT]$ СООБЩЕНИЕ:  система БД была выключена: 2019-12-23 23:31:07 MSK
СООБЩЕНИЕ:  Защита от зацикливания мультитранзакций сейчас включена
СООБЩЕНИЕ:  процесс запуска автоочистки создан
СООБЩЕНИЕ:  система БД готова принимать подключения

[valentina@valentina PROEKT]$ createdb 
[valentina@valentina PROEKT]$ psql 
psql (9.6.16)
Введите "help", чтобы получить справку.

valentina=# -------------------------
valentina=# -- Музыкальный инструмент
valentina=# -------------------------
valentina=# CREATE TABLE instruments
valentina-# (
valentina(#   instr_id      bigint    primary key ,
valentina(#   instr_name    char(30)  NOT NULL ,
valentina(#   instr_type    char(30) ,
valentina(#   instr_destin  text
valentina(# );
CREATE TABLE
valentina=# 
valentina=# -----------------------
valentina=# -- Позиция продажи
valentina=# -----------------------
valentina=# CREATE TABLE sellPosition
valentina-# (
valentina(#   sell_pos_id   int    primary key ,
valentina(#   instr_id      bigint references instruments(instr_id),
valentina(#   instr_number  int    ,
valentina(#   retial_price  int    ,
valentina(#   sell_cost     int    
valentina(# );
CREATE TABLE
valentina=# 
valentina=# --------------------------
valentina=# -- Продажа
valentina=# --------------------------
valentina=# CREATE TABLE sale
valentina-# (
valentina(#   sale_num  int   primary key ,
valentina(#   sale_pos  int   references sellPosition(sell_pos_id),
valentina(#   date      date 
valentina(# );
CREATE TABLE
valentina=# 
valentina=# ----------------------
valentina=# -- Город
valentina=# ----------------------
valentina=# CREATE TABLE city
valentina-# (
valentina(#   city_num  int   primary key ,
valentina(#   city_name text  NOT NULL 
valentina(# );
CREATE TABLE
valentina=# 
valentina=# -----------------------
valentina=# -- Позиция поставки
valentina=# -----------------------
valentina=# CREATE TABLE supplyPosition
valentina-# (
valentina(#   supp_pos_id      int    primary key ,
valentina(#   instr_id         bigint references instruments(instr_id),
valentina(#   instr_number     int    ,
valentina(#   wholesale_price  int    ,
valentina(#   supp_cost        int    
valentina(# );
CREATE TABLE
valentina=# 
valentina=# -----------------------
valentina=# -- Поставка
valentina=# -----------------------
valentina=# CREATE TABLE supply
valentina-# (
valentina(#   supply_id  bigint primary key ,
valentina(#   supply_pos int    references supplyPosition(supp_pos_id),
valentina(#   date       date    
valentina(# );
CREATE TABLE
valentina=# 
valentina=# ------------------------
valentina=# -- Поставщик
valentina=# ------------------------
valentina=# CREATE TABLE supplier
valentina-# (
valentina(#   supp_id    bigint   primary key ,
valentina(#   city_num   int      references city(city_num),
valentina(#   supply_id  bigint   references supply(supply_id),
valentina(#   full_name  text     ,
valentina(#   phone      bigint 
valentina(# );
CREATE TABLE
valentina=# 
valentina=# ---------------------------
valentina=# -- Populate instruments table
valentina=# ---------------------------
valentina=# INSERT INTO instruments(instr_id, instr_name, instr_type, instr_destin)
valentina-# VALUES(00000001, 'greg bennett d1', 'акустическая гитара', 'профессиональный');
INSERT 0 1
valentina=# INSERT INTO instruments(instr_id, instr_name, instr_type, instr_destin)
valentina-# VALUES(00000002, 'FENDER CD-60S BLACK WN', 'акустическая гитара', 'профессиональный');
INSERT 0 1
valentina=# INSERT INTO instruments(instr_id, instr_name, instr_type, instr_destin)
valentina-# VALUES(00000003, 'PRADO HS-3807 NA', 'акустическая гитара', 'учебный');
INSERT 0 1
valentina=# INSERT INTO instruments(instr_id, instr_name, instr_type, instr_destin)
valentina-# VALUES(00000004, 'BOSTON TR-104/WH', 'духовые', 'учебный');
INSERT 0 1
valentina=# INSERT INTO instruments(instr_id, instr_name, instr_type, instr_destin)
valentina-# VALUES(00000005, 'TROMBA TR-1L', 'духовые', 'учебный');
INSERT 0 1
valentina=# INSERT INTO instruments(instr_id, instr_name, instr_type, instr_destin)
valentina-# VALUES(00000006, 'J.KEILWERTH JK2400-8', 'духовые', 'профессиональный');
INSERT 0 1
valentina=# INSERT INTO instruments(instr_id, instr_name, instr_type, instr_destin)
valentina-# VALUES(00000007, 'TAMA SG52KH6-BK STAGESTAR', 'ударные', 'учебный');
INSERT 0 1
valentina=# INSERT INTO instruments(instr_id, instr_name, instr_type, instr_destin)
valentina-# VALUES(00000008, 'KORG PA300', 'клавишные', 'профессиональный');
INSERT 0 1
valentina=# 
valentina=# 
valentina=# -------------------------
valentina=# -- Populate sellPosition table
valentina=# -------------------------
valentina=# INSERT INTO sellPosition(sell_pos_id, instr_id, instr_number, retial_price, sell_cost) VALUES (1, 2, 2, 17300, 2*17300);
INSERT 0 1
valentina=# INSERT INTO sellPosition(sell_pos_id, instr_id, instr_number, retial_price, sell_cost) VALUES (2, 1, 5, 9000, 5*9000);
INSERT 0 1
valentina=# INSERT INTO sellPosition(sell_pos_id, instr_id, instr_number, retial_price, sell_cost) VALUES (3, 5, 4, 11100, 4*11100);
INSERT 0 1
valentina=# INSERT INTO sellPosition(sell_pos_id, instr_id, instr_number, retial_price, sell_cost) VALUES (4, 4, 3, 12000, 3*12000);
INSERT 0 1
valentina=# INSERT INTO sellPosition(sell_pos_id, instr_id, instr_number, retial_price, sell_cost) VALUES (5, 6, 1, 500500, 1*500500);
INSERT 0 1
valentina=# --------------------------
valentina=# -- Populate sale table
valentina=# --------------------------
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
valentina-# VALUES(00000001, 1, 01.11.19);
ОШИБКА:  ошибка синтаксиса (примерное положение: ".19") (символ 69)
ОПЕРАТОР:  INSERT INTO sale(sale_num, sale_pos, date)
        VALUES(00000001, 1, 01.11.19);
ОШИБКА:  ошибка синтаксиса (примерное положение: ".19")
СТРОКА 2: VALUES(00000001, 1, 01.11.19);
                                   ^
valentina=# --------------------------
-- Populate sale table
--------------------------
INSERT INTO sale(sale_num, sale_pos, date)
VALUES(00000001, 1, 01.11.2019);
ОШИБКА:  ошибка синтаксиса (примерное положение: ".2019") (символ 69)
ОПЕРАТОР:  INSERT INTO sale(sale_num, sale_pos, date)
        VALUES(00000001, 1, 01.11.2019);
ОШИБКА:  ошибка синтаксиса (примерное положение: ".2019")
СТРОКА 2: VALUES(00000001, 1, 01.11.2019);
                                   ^
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
valentina-# VALUES(00000001, 1, 01/1/2019);
ОШИБКА:  столбец "date" имеет тип date, а выражение - integer (символ 64)
ПОДСКАЗКА:  Перепишите выражение или преобразуйте его тип.
ОПЕРАТОР:  INSERT INTO sale(sale_num, sale_pos, date)
        VALUES(00000001, 1, 01/1/2019);
ОШИБКА:  столбец "date" имеет тип date, а выражение - integer
СТРОКА 2: VALUES(00000001, 1, 01/1/2019);
                              ^
ПОДСКАЗКА:  Перепишите выражение или преобразуйте его тип.
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
VALUES(00000001, 1, 1/1/2019); 
ОШИБКА:  столбец "date" имеет тип date, а выражение - integer (символ 64)
ПОДСКАЗКА:  Перепишите выражение или преобразуйте его тип.
ОПЕРАТОР:  INSERT INTO sale(sale_num, sale_pos, date)
        VALUES(00000001, 1, 1/1/2019);
ОШИБКА:  столбец "date" имеет тип date, а выражение - integer
СТРОКА 2: VALUES(00000001, 1, 1/1/2019);
                              ^
ПОДСКАЗКА:  Перепишите выражение или преобразуйте его тип.
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
VALUES(00000001, 1, 2019-01-01);
ОШИБКА:  столбец "date" имеет тип date, а выражение - integer (символ 64)
ПОДСКАЗКА:  Перепишите выражение или преобразуйте его тип.
ОПЕРАТОР:  INSERT INTO sale(sale_num, sale_pos, date)
        VALUES(00000001, 1, 2019-01-01);
ОШИБКА:  столбец "date" имеет тип date, а выражение - integer
СТРОКА 2: VALUES(00000001, 1, 2019-01-01);
                              ^
ПОДСКАЗКА:  Перепишите выражение или преобразуйте его тип.
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
VALUES(00000001, 1, 01/01/2019);
ОШИБКА:  столбец "date" имеет тип date, а выражение - integer (символ 64)
ПОДСКАЗКА:  Перепишите выражение или преобразуйте его тип.
ОПЕРАТОР:  INSERT INTO sale(sale_num, sale_pos, date)
        VALUES(00000001, 1, 01/01/2019);
ОШИБКА:  столбец "date" имеет тип date, а выражение - integer
СТРОКА 2: VALUES(00000001, 1, 01/01/2019);
                              ^
ПОДСКАЗКА:  Перепишите выражение или преобразуйте его тип.
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
VALUES(00000001, 1, '1/1/2019');
INSERT 0 1
valentina=# VALUES(00000001, 2, '6/11/2019');
 column1 | column2 |  column3  
---------+---------+-----------
       1 |       2 | 6/11/2019
(1 строка)

valentina=# INSERT INTO sale(sale_num, sale_pos, date)
valentina-# VALUES(00000003, 3, '13/11/2019');
INSERT 0 1
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
valentina-# VALUES(00000004, 4, '14/11/2019');
INSERT 0 1
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
valentina-# VALUES(00000005, 5, '27/11/2019');
INSERT 0 1
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
valentina-# VALUES(00000001, 2, '6/11/2019');
ОШИБКА:  повторяющееся значение ключа нарушает ограничение уникальности "sale_pkey"
ПОДРОБНОСТИ:  Ключ "(sale_num)=(1)" уже существует.
ОПЕРАТОР:  INSERT INTO sale(sale_num, sale_pos, date)
        VALUES(00000001, 2, '6/11/2019');
ОШИБКА:  повторяющееся значение ключа нарушает ограничение уникальности "sale_pkey"
ПОДРОБНОСТИ:  Ключ "(sale_num)=(1)" уже существует.
valentina=# select * from sale;
 sale_num | sale_pos |    date    
----------+----------+------------
        1 |        1 | 2019-01-01
        3 |        3 | 2019-11-13
        4 |        4 | 2019-11-14
        5 |        5 | 2019-11-27
(4 строки)

valentina=# INSERT INTO sale(sale_num, sale_pos, date)
valentina-# VALUES(00000001, 2, '6/11/2019');
ОШИБКА:  повторяющееся значение ключа нарушает ограничение уникальности "sale_pkey"
ПОДРОБНОСТИ:  Ключ "(sale_num)=(1)" уже существует.
ОПЕРАТОР:  INSERT INTO sale(sale_num, sale_pos, date)
        VALUES(00000001, 2, '6/11/2019');
ОШИБКА:  повторяющееся значение ключа нарушает ограничение уникальности "sale_pkey"
ПОДРОБНОСТИ:  Ключ "(sale_num)=(1)" уже существует.
valentina=# INSERT INTO sale(sale_num, sale_pos, date)
valentina-# VALUES(00000002, 2, '6/11/2019');
INSERT 0 1
valentina=# INSERT INTO city(city_num, city_name)
valentina-# VALUES(1000, 'Москва');
INSERT 0 1
valentina=# INSERT INTO city(city_num, city_name)
valentina-# VALUES(1900, 'Санкт-Петербург');
INSERT 0 1
valentina=# INSERT INTO city(city_num, city_name)
valentina-# VALUES(3000, 'Тула');
INSERT 0 1
valentina=# INSERT INTO city(city_num, city_name)
valentina-# VALUES(1400, 'Калининград');
INSERT 0 1
valentina=# INSERT INTO city(city_num, city_name)
valentina-# VALUES(2003, 'Калуга');
INSERT 0 1
valentina=# INSERT INTO supplyPosition(supp_pos_id, instr_id, instr_number, wholesale_price, supp_cost) VALUES (1, 1, 10, 7000, 10*7000);
INSERT 0 1
valentina=# INSERT INTO supplyPosition(supp_pos_id, instr_id, instr_number, wholesale_price, supp_cost) VALUES (2, 2, 8, 15000, 8*15000);
INSERT 0 1
valentina=# INSERT INTO supplyPosition(supp_pos_id, instr_id, instr_number, wholesale_price, supp_cost) VALUES (3, 3, 15, 1500, 15*1500);
INSERT 0 1
valentina=# INSERT INTO supplyPosition(supp_pos_id, instr_id, instr_number, wholesale_price, supp_cost) VALUES (4, 4, 8, 10000, 6*10000);
INSERT 0 1
valentina=# INSERT INTO supplyPosition(supp_pos_id, instr_id, instr_number, wholesale_price, supp_cost) VALUES (5, 6, 9, 450000, 10*450000);
INSERT 0 1
valentina=# INSERT INTO supplyPosition(supp_pos_id, instr_id, instr_number, wholesale_price, supp_cost) VALUES (6, 7, 6, 30000, 6*30000);
INSERT 0 1
valentina=# INSERT INTO supplyPosition(supp_pos_id, instr_id, instr_number, wholesale_price, supp_cost) VALUES (7, 5, 6, 9000, 6*9000);
INSERT 0 1
valentina=# INSERT INTO supply(supply_id, supply_pos, date)
valentina-# VALUES(00000004, 4, 20.11.2018);^C
valentina=# INSERT INTO supply(supply_id, supply_pos, date)
valentina-# VALUES(00000001, 1, '23/8/2016');
INSERT 0 1
valentina=# INSERT INTO supply(supply_id, supply_pos, date)
valentina-# VALUES(00000002, 2, '26/1/2017');
INSERT 0 1
valentina=# INSERT INTO supply(supply_id, supply_pos, date)
valentina-# VALUES(00000003, 3, '11/6/2017');
INSERT 0 1
valentina=# INSERT INTO supply(supply_id, supply_pos, date)
valentina-# VALUES(00000004, 4, '20/11/2018');
INSERT 0 1
valentina=# INSERT INTO supplier(supp_id, city_num, supply_id, full_name, phone) VALUES (1, 1900, 2, 'Аркадий Аркадиевич Башмачкин', 89105154555);
INSERT 0 1
valentina=# INSERT INTO supplier(supp_id, city_num, supply_id, full_name, phone) VALUES (2, 1000, 3, 'Семен Семенович Безруков', 89543223453);
INSERT 0 1
valentina=# INSERT INTO supplier(supp_id, city_num, supply_id, full_name, phone) VALUES (3, 1000, 3, 'Семен Семенович Безруков', 89543223453);
INSERT 0 1
valentina=# INSERT INTO supplier(supp_id, city_num, supply_id, full_name, phone) VALUES (4, 1400, 1, 'Вуараджан Вучаганович Григорян', 89196542311);
INSERT 0 1
valentina=# INSERT INTO supplier(supp_id, city_num, supply_id, full_name, phone) VALUES (5, 1000, 4, 'Иван Иванович Иванов', 89543223453);
INSERT 0 1
